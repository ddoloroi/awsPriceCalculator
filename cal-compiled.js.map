{"version":3,"sources":["cal.js"],"names":[],"mappings":"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","file":"cal-compiled.js","sourcesContent":["\"use strict\";\n\n// Utils\nvar $id = function (idSelector) {\n        return document.getElementById(idSelector)\n    },\n    $class = function (classSelector) {\n        return document.getElementsByClassName(classSelector)\n    },\n    $get = function (node) {\n        if (typeof node === \"string\") {\n            node = $id(node);\n        }\n        if (node.nodeName == \"INPUT\") {\n            return parseFloat(node.value)\n        } else {\n            return parseFloat(node.innerText)\n        }\n    },\n    $set = function (node, value) {\n        var result = value;\n        if (typeof node === \"string\") {\n            node = $id(node);\n        }\n        if (node.nodeName == \"INPUT\") {\n            node.value = result\n        } else {\n            node.innerText = result\n        }\n    },\n\n    step_minus = function (a, b) {\n        if (a < b) {\n            return 0\n        } else {\n            return a - b\n        }\n    };\n\n\nvar view = {\n    subscribe: function (selector) {\n        var self = this,\n            e = $id(selector);\n\n        e.oninput = function () {\n            self.model.notify();\n            self.update();\n        };\n        e.onpropertychange = e.oninput;\n    },\n    bind: function (selector, propFunc) {\n        this.bindList[selector] = propFunc;\n    }\n\n};\n\n\nvar AwsView = function (awsModel) {\n    var self = this;\n\n\n    self.save = function () {\n        var elems = $class(\"model\");\n        self.model.saved = {};\n\n        for (var i = 0; i < elems.length; i++) {\n            self.model.saved[elems[i].id] = $get(elems[i]);\n        }\n    };\n\n    self.restore = function () {\n        var saved = self.model.saved;\n        for (var prop in saved) {\n            if (saved.hasOwnProperty(prop)) {\n                $set(prop, saved[prop]);\n            }\n        }\n    };\n\n    self.compare = function () {\n        var saved = self.model.saved;\n        var transform = function (num, fixDecimal) {\n            var result;\n            result = num.toFixed(fixDecimal);\n            if (num > 0) {\n                result = \"+\" + result;\n            }\n            return result.replace(\"+\", \"↑ \").replace(\"-\", \"↓ \");\n        };\n\n\n        for (var prop in saved) {\n            if (saved.hasOwnProperty(prop)) {\n\n                var newVal = $get(prop),\n                    oldVal = saved[prop],\n                    delta = newVal - oldVal,\n                    e = $id(prop + \"_delta\");\n                if (prop.endsWith(\"unit\")) {\n                    $set(e, transform(delta, 2));\n                } else {\n                    $set(e, transform(delta, 1));\n                }\n\n\n                if (delta === 0) {\n                    e.classList.remove(\"delta-inc\");\n                    e.classList.remove(\"delta-dec\");\n                } else if (delta > 0) {\n                    e.classList.add(\"delta-inc\");\n                    e.classList.remove(\"delta-dec\");\n                } else {\n                    e.classList.add(\"delta-dec\");\n                    e.classList.remove(\"delta-inc\");\n                }\n\n            }\n        }\n    };\n\n    self.update = function () {\n        for (var selector in self.bindList) {\n            if (self.bindList.hasOwnProperty(selector)) {\n                var computedProp = self.model[self.bindList[selector]]();\n                if (selector.endsWith(\"unit\")) {\n                    $set(selector, computedProp.toFixed(2));\n                } else {\n                    $set(selector, computedProp.toFixed(1));\n                }\n            }\n        }\n        self.compare();\n    };\n\n    self.initDelta = function () {\n        var e, delElem, elems = $class(\"model\");\n        for (var i = 0; i < elems.length; i++) {\n            e = elems[i];\n            delElem = document.createElement(\"span\");\n            delElem.classList.add(\"delta\");\n            delElem.id = e.id + \"_delta\";\n            delElem.innerText = \"\";\n            e.parentNode.insertBefore(delElem, e.nextSibling);\n        }\n        self.save()\n    };\n\n\n    self.bind3 = function (outputSelector, propFunc, inputSelectorArray) {\n        this.bind(outputSelector, propFunc);\n\n        for (var i = 0; i < inputSelectorArray.length; i++) {\n            // Hover input box\n            $id(inputSelectorArray[i]).addEventListener(\"mouseover\", function () {\n                this.previousElementSibling.classList.add(\"current\");\n                $id(outputSelector).previousElementSibling.classList.add(\"affects\");\n            });\n            $id(inputSelectorArray[i]).addEventListener(\"mouseout\", function () {\n                this.previousElementSibling.classList.remove(\"current\");\n                $id(outputSelector).previousElementSibling.classList.remove(\"affects\");\n                $id(outputSelector).previousElementSibling.classList.remove(\"affected\");\n            });\n\n            // Hover label of input box\n            $id(inputSelectorArray[i]).previousElementSibling.addEventListener(\"mouseover\", function () {\n                this.classList.add(\"current\");\n                $id(outputSelector).previousElementSibling.classList.add(\"affects\");\n            });\n\n            $id(inputSelectorArray[i]).previousElementSibling.addEventListener(\"mouseout\", function () {\n                this.classList.remove(\"current\");\n                $id(outputSelector).previousElementSibling.classList.remove(\"affects\");\n                $id(outputSelector).previousElementSibling.classList.remove(\"affected\");\n\n            });\n\n        }\n\n        // Hover output text\n        $id(outputSelector).addEventListener(\"mouseover\", function () {\n            this.previousElementSibling.classList.add(\"current\");\n            for (var i = 0; i < inputSelectorArray.length; i++) {\n                $id(inputSelectorArray[i]).previousElementSibling.classList.add(\"affected\")\n            }\n        });\n\n        $id(outputSelector).addEventListener(\"mouseout\", function () {\n            this.previousElementSibling.classList.remove(\"current\");\n            for (var i = 0; i < inputSelectorArray.length; i++) {\n                $id(inputSelectorArray[i]).previousElementSibling.classList.remove(\"affects\");\n                $id(inputSelectorArray[i]).previousElementSibling.classList.remove(\"affected\");\n\n            }\n        });\n\n        // Hover label of output text\n        $id(outputSelector).previousElementSibling.addEventListener(\"mouseover\", function () {\n            this.classList.add(\"current\");\n            for (var i = 0; i < inputSelectorArray.length; i++) {\n                $id(inputSelectorArray[i]).previousElementSibling.classList.add(\"affected\")\n            }\n        });\n\n        $id(outputSelector).previousElementSibling.addEventListener(\"mouseout\", function () {\n            this.classList.remove(\"current\");\n            for (var i = 0; i < inputSelectorArray.length; i++) {\n                $id(inputSelectorArray[i]).previousElementSibling.classList.remove(\"affects\");\n                $id(inputSelectorArray[i]).previousElementSibling.classList.remove(\"affected\");\n            }\n        });\n    };\n\n\n    self.model = awsModel;\n    self.subscribe(\"p_user\");\n    self.subscribe(\"p_new_moment\");\n    self.subscribe(\"p_avg_length\");\n    self.subscribe(\"p_audience\");\n    self.subscribe(\"p_session\");\n    self.subscribe(\"p_session_length\");\n    self.subscribe(\"p_mbps\");\n    self.bindList = {};\n\n    self.bind3(\"v_up\", \"d_upload_GB\", [\"p_user\", \"p_new_moment\", \"p_avg_length\", \"p_mbps\"]);\n    self.bind3(\"v_store_ebs\", \"d_store_ebs_GB\", [\"p_user\", \"p_new_moment\", \"p_avg_length\", \"p_mbps\", \"v_up\"]);\n    self.bind3(\"v_store_s3\", \"d_store_s3_GB\", [\"p_user\", \"p_new_moment\", \"p_avg_length\", \"p_mbps\", \"v_up\", \"v_store_ebs\"]);\n\n    self.bind3(\"v_down\", \"d_download_GB\", [\"p_audience\", \"p_session\", \"p_session_length\", \"p_mbps\"]);\n\n\n    self.bind3(\"v_s3_unit\", \"s3_unit\",  []);\n    self.bind3(\"v_ebs_unit\", \"ebs_unit\",  []);\n\n    self.bind3(\"v_s3\", \"s3\", [\"p_user\", \"p_new_moment\", \"p_avg_length\", \"p_mbps\", \"v_store_ebs\", \"v_s3_unit\"]);\n    self.bind3(\"v_transcoder\", \"transcoder\", [\"p_user\", \"p_new_moment\", \"p_avg_length\", \"p_mbps\", \"v_up\"]);\n    self.bind3(\"v_cdn\", \"cdn\", [\"p_audience\", \"p_session\", \"p_session_length\", \"p_mbps\", \"v_down\", \"v_up\"]);\n    self.bind3(\"v_ebs\", \"ebs\", [\"p_user\", \"p_new_moment\", \"p_avg_length\", \"p_mbps\", \"v_up\", \"v_store_ebs\", \"v_ebs_unit\"]);\n    self.bind3(\"v_web\", \"webservice\", [\"p_user\"]);\n\n    self.bind3(\"v_overlay\", \"overlay\", [\"p_user\", \"p_new_moment\", \"p_avg_length\"]);\n\n\n    self.bind3(\"v_transcoder_unit\", \"transcoder_unit\", [\"p_mbps\"]);\n    self.bind3(\"v_cdn_unit\", \"cdn_unit\",  [\"p_audience\", \"p_session\", \"p_session_length\", \"p_mbps\", \"v_down\", \"v_up\"]);\n\n\n    self.bind3(\"v_total\", \"total\", [\"v_s3\", \"v_transcoder\", \"v_cdn\", \"v_web\", \"v_overlay\", \"v_ebs\"]);\n\n    $id(\"c_delta\").addEventListener(\"change\", function () {\n            var elements = $class(\"delta\");\n            for (var i = 0; i < elements.length; i++) {\n                elements[i].classList.toggle(\"hide\")\n            }\n        }\n    );\n\n    $id(\"c_unit\").addEventListener(\"change\", function() {\n        var element = $id(\"unit-cost-subsection\");\n        element.classList.toggle(\"hide\");\n    });\n\n    $id(\"c_dep\").addEventListener(\"change\", function() {\n        var element = $id(\"form-container\");\n        element.classList.toggle(\"show-dep\");\n    });\n\n    $id(\"b_save\").addEventListener(\"click\", function () {\n        self.save();\n        self.compare();\n    });\n\n    $id(\"b_restore\").addEventListener(\"click\", function () {\n        self.restore();\n        self.compare();\n    });\n\n    $id(\"menu-on\").addEventListener(\"click\", function() {\n       var element = $id(\"menu-content\");\n        element.classList.toggle(\"hide\");\n    });\n\n\n};\n\n\nAwsView.prototype = view;\n\n\nvar AwsModel = function () {\n    this.notify = this.parseAll;\n    this.notify()\n};\n\n\nAwsModel.prototype.parseAll = function () {\n    this.p_user = $get(\"p_user\");\n    this.p_new_moment = $get(\"p_new_moment\");\n    this.p_avg_minute = $get(\"p_avg_length\");\n    this.p_audience = $get(\"p_audience\");\n    this.p_session = $get(\"p_session\");\n    this.p_session_minute = $get(\"p_session_length\");\n    this.p_mbps = $get(\"p_mbps\");\n};\n\nAwsModel.prototype.t_upload_minute = function () {\n    return this.p_user * this.p_new_moment * this.p_avg_minute\n};\n\nAwsModel.prototype.t_acc_minute = function () {\n    // TODO: use real cumulative length\n    return this.t_upload_minute()\n};\n\nAwsModel.prototype.t_download_minute = function () {\n\n    return this.p_audience * this.p_session * this.p_session_minute\n};\n\n\nAwsModel.prototype.data_size_GB = function (minute) {\n    return (minute * 60 * this.p_mbps) / (8 * 1024);\n};\n\nAwsModel.prototype.d_upload_GB = function () {\n    return this.data_size_GB(this.t_upload_minute());\n};\n\nAwsModel.prototype.d_store_ebs_GB = function () {\n    return this.data_size_GB(this.t_acc_minute());\n};\n\nAwsModel.prototype.d_store_s3_GB = function () {\n    return this.d_store_ebs_GB() * 2;\n};\n\nAwsModel.prototype.d_download_GB = function () {\n    return this.data_size_GB(this.t_download_minute());\n};\n\nAwsModel.prototype.s3 = function () {\n\n    // https://aws.amazon.com/s3/pricing/\n    // Note: \"Standard - Infrequent Access Storage\" price in United States\n    // Actual price is $0.125 per GB, use $0.13 to compensate Request price\n    return 0.13 * this.d_store_s3_GB();\n};\n\nAwsModel.prototype.s3_unit = function() {\n    return 0.13;\n};\n\n\n\nAwsModel.prototype.transcoder = function () {\n    // https://aws.amazon.com/elastictranscoder/pricing/\n    return 0.03 * this.t_upload_minute();\n};\n\nAwsModel.prototype.transcoder_unit = function() {\n    return this.transcoder() / this.d_upload_GB();\n};\n\nAwsModel.prototype.cdn = function () {\n    var up_size = this.d_upload_GB(),\n        down_size = this.d_download_GB();\n\n    // https://aws.amazon.com/cloudfront/pricing/\n    var up_price = up_size * 0.02,\n        down_price =\n            Math.min(down_size, 10000) * 0.085 +\n            Math.min(step_minus(down_size, 10000), 40000) * 0.08 +\n            Math.min(step_minus(down_size, 50000), 100000) * 0.06 +\n            Math.min(step_minus(down_size, 150000), 350000) * 0.04 +\n            Math.min(step_minus(down_size, 500000), 524000) * 0.03 +\n            Math.min(step_minus(down_size, 1024000), 4000000) * 0.025 +\n            step_minus(down_size, 5024000) * 0.020;\n    return up_price + down_price\n};\n\nAwsModel.prototype.cdn_unit = function() {\n    return this.cdn() / this.d_download_GB();\n};\n\n\nAwsModel.prototype.overlay = function() {\n    return Math.ceil(this.t_upload_minute() * 4 / (60 * 24 * 31)) * 59.86\n};\n\nAwsModel.prototype.webservice = function() {\n    return Math.ceil(this.p_user / 1000 + this.p_audience / 10000)  * 29.28;\n};\n\n\n\nAwsModel.prototype.ebs = function() {\n    return this.d_store_ebs_GB() * this.ebs_unit();\n};\n\nAwsModel.prototype.ebs_unit = function() {\n    return 0.10;\n};\nAwsModel.prototype.total = function () {\n    return this.s3() + this.transcoder() + this.cdn() + this.overlay() + this.ebs() + this.webservice();\n};\n\n"]}